Loading Test Cases from: datasets/synthetic_rag_data.json
Loading DB Snapshot from: datasets/snapshot.json
Loaded 56 adverts from snapshot.
Indexing data in Vector Engine...

--- Starting Pipeline Evaluation (K_Retrieve=50, K_Rerank=5) ---

ID: ru_case_001_perfect
  Query: '2-комнатная квартира возле метро Москва, Алматы'
  Found (3): [101, 102, 2102]
  Target: {101, 102}
  P: 0.67 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_002_ranking_disorder
  Query: 'Шымкент қаласында жер үй жалдау'
  Found (4): [201, 2002, 1201, 1601]
  Target: {201}
  P: 0.25 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: ru_case_003_student_noise
  Query: 'Дешевая квартира для студентов, можно парням'
  Found (1): [301]
  Target: {301, 302, 303}
  P: 1.00 | R: 0.33 | NDCG: 0.47
--------------------------------------------------
ID: kz_case_004_cutoff_miss
  Query: 'Астанада элиталық пәтер керек, ремонт жақсы'
  Found (1): [401]
  Target: {401}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: ru_case_005_cottage_pool
  Query: 'Аренда коттеджа с бассейном и сауной на выходные'
  Found (2): [501, 502]
  Target: {501, 502, 503}
  P: 1.00 | R: 0.67 | NDCG: 0.77
--------------------------------------------------
ID: kz_case_006_university_partial
  Query: 'Университет жанында 1 бөлмелі пәтер'
  Found (5): [603, 601, 602, 301, 18]
  Target: {601, 602, 603}
  P: 0.60 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: ru_case_007_office_fail
  Query: 'Снять офис в Бостандыкском районе под бизнес'
  Found (2): [702, 701]
  Target: {701, 702}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_008_pets_mrr_high
  Query: 'Мысықпен тұруға болатын пәтер іздеймін'
  Found (1): [801]
  Target: {801, 802, 803}
  P: 1.00 | R: 0.33 | NDCG: 0.47
--------------------------------------------------
ID: ru_case_009_medeu_oversaturated
  Query: '3-комнатная квартира в Медеуском районе'
  Found (5): [10, 12, 13, 18, 15]
  Target: {10, 11, 12, 13, 14, 15, 16, 17, 18, 19}
  P: 1.00 | R: 0.50 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_010_euro_renovation
  Query: 'Евроремонт жасалған таза пәтер'
  Found (3): [1001, 1002, 2101]
  Target: {1001, 1002}
  P: 0.67 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: ru_case_011_specific_complex
  Query: 'ЖК Гагарин Парк 1-комнатная'
  Found (2): [1101, 1102]
  Target: {1101, 1102}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_012_daily_rent
  Query: 'Тәулікке пәтер керек, бүгінге'
  Found (1): [1201]
  Target: {1201, 1202}
  P: 1.00 | R: 0.50 | NDCG: 0.61
--------------------------------------------------
ID: ru_case_013_view_mountains
  Query: 'Квартира с красивым видом на горы, верхний этаж'
  Found (2): [1301, 503]
  Target: {1301}
  P: 0.50 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_014_cheap_hostel
  Query: 'Арзан жатақхана немесе хостел'
  Found (2): [1401, 2102]
  Target: {1401, 1402, 1403}
  P: 0.50 | R: 0.33 | NDCG: 0.47
--------------------------------------------------
ID: ru_case_015_shop_ground_floor
  Query: 'Помещение под магазин на первом этаже, первая линия'
  Found (3): [1501, 1502, 902]
  Target: {1501, 1502}
  P: 0.67 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_016_large_family_house
  Query: 'Үлкен отбасыға арналған кең үй'
  Found (2): [1602, 1601]
  Target: {1601, 1602}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: ru_case_017_near_mall
  Query: 'Квартира рядом с Мега Центром на Розыбакиева'
  Found (2): [1701, 1702]
  Target: {1701, 1702, 1703}
  P: 1.00 | R: 0.67 | NDCG: 0.77
--------------------------------------------------
ID: kz_case_018_left_bank
  Query: 'Сол жағалаудан жаңа үйден пәтер'
  Found (3): [1802, 1801, 1402]
  Target: {1801, 1802}
  P: 0.67 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: ru_case_019_old_cheap
  Query: 'Вторичка недорого, можно без ремонта'
  Found (1): [1901]
  Target: {1901}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: kz_case_020_center_office
  Query: 'Қаланың орталығынан кеңсе іздеймін'
  Found (1): [2001]
  Target: {2001, 2002}
  P: 1.00 | R: 0.50 | NDCG: 0.61
--------------------------------------------------
ID: mix_case_021_satpayev_code_switch
  Query: '2 бөлмелі на Сатпаева долгосрочно'
  Found (1): [2101]
  Target: {2101}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: mix_case_022_cheap_family_mix
  Query: 'Снять арзан пәтер семейным'
  Found (1): [2102]
  Target: {2102}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------
ID: mix_case_023_landmark_mix
  Query: 'Алматы Арена жанынан 1-комнатная'
  Found (1): [2103]
  Target: {2103}
  P: 1.00 | R: 1.00 | NDCG: 1.00
--------------------------------------------------

=== Final Aggregate Metrics ===
Total Cases:       23
Average Precision: 0.8486
Average Recall:    0.8188
Average F1 Score:  0.7833
Average MRR:       1.0000
Average NDCG:      0.8767
===============================
